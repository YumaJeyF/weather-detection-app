(()=>{"use strict";var e={87:(e,t,n)=>{var i=n(467),c=n(462);i.A(),(0,c.R)()},277:()=>{},365:(e,t,n)=>{n.d(t,{A:()=>i});const i=async e=>{const t=document.querySelector(".container__load");t.classList.contains("container__load--active")||t.classList.add("container__load--active");const n=`https://api.openweathermap.org/data/2.5/weather?q=${e}&appid=7827be5493bdb9aff78ab7c81a125179&units=metric&lang=ru`,i=await fetch(n);if(404==i.status)return!1;if(i.ok)return await i.json();throw new Error(`Ошибка ${i.status}`)}},383:(e,t,n)=>{n.d(t,{a:()=>c});var i=n(961);const c=e=>{const t=document.querySelector(".temperature__number"),n=document.querySelector(".temperature__inf"),c=document.querySelector(".city__name"),r=document.querySelector(".main__text");if(0!=e){if(""===t.nextElementSibling.innerHTML&&(t.nextElementSibling.innerHTML="o"),c.innerHTML=e.name,document.querySelector(".temperature__icon"))document.querySelector(".temperature__icon").src=`https://openweathermap.org/img/w/${e.weather[0].icon}.png`;else{const t=document.createElement("img");t.classList.add("temperature__icon"),t.src=`https://openweathermap.org/img/w/${e.weather[0].icon}.png`,n.prepend(t)}t.innerHTML=Math.floor(e.main.temp);const o=e.weather[0].description;r.innerHTML=o.charAt(0).toUpperCase()+o.slice(1),document.querySelectorAll(".add-inf__text").forEach((t=>{"Ветер"===t.previousElementSibling.innerHTML&&(t.innerHTML=`${Math.floor(e.wind.speed)} м/c, ${(0,i.J)(e.wind.deg)}`),"Давление"===t.previousElementSibling.innerHTML&&(t.innerHTML=`${e.main.pressure} мм рт. ст.`),"Влажность"===t.previousElementSibling.innerHTML&&(t.innerHTML=`${e.main.humidity}%`),"Облачность"===t.previousElementSibling.innerHTML&&(t.innerHTML=`${e.clouds.all}%`)}))}document.querySelector(".container__load").classList.remove("container__load--active")}},961:(e,t,n)=>{function i(e){return e>337.5?"cеверный":e>292.5?"северо-западный":e>247.5?"cеверо-западный":e>202.5?"юго-западный":e>157.5?"южный":e>122.5?"юго-восточный":e>67.5?"восточный":e>22.5?"северо-восточный":"северный"}n.d(t,{J:()=>i})},119:(e,t,n)=>{n.d(t,{Q:()=>r});var i=n(365),c=n(383);const r=()=>{navigator.geolocation.getCurrentPosition((async e=>{const t=e.coords,n=`https://api.geoapify.com/v1/geocode/reverse?lat=${t.latitude}&lon=${t.longitude}&lang=ru&apiKey=8a721d4805c34256876cafd7571dfdc0`,r=await fetch(n);let o;if(!r.ok)throw new Error(`Ошибка, статус ошибки ${r.status}`);o=await r.json();const a=await(0,i.A)(o.features[0].properties.city);(0,c.a)(a)}),(e=>console.error(e.code+" "+e.message)),{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}},73:(e,t,n)=>{function i(e){return 9*e/5+32}function c(e){return 5*(e-32)/9}n.d(t,{$:()=>c,Q:()=>i})},462:(e,t,n)=>{n.d(t,{R:()=>a});var i=n(365),c=n(383),r=n(73),o=n(119);const a=async()=>{const e=await(0,i.A)("Москва");(0,c.a)(e);const t=document.querySelectorAll(".city__btn-temp"),n=document.querySelector(".temperature__number");t.forEach((e=>e.addEventListener("click",(()=>{if(!e.classList.contains("city__btn-temp--active"))if(t.forEach((e=>{e.classList.contains("city__btn-temp--active")&&e.classList.remove("city__btn-temp--active")})),e.classList.add("city__btn-temp--active"),"F"===e.innerHTML){const e=(0,r.Q)(n.innerHTML);n.innerHTML=Math.round(e)}else{const e=(0,r.$)(n.innerHTML);n.innerHTML=Math.round(e)}}))));const a=document.querySelector("#change-city"),s=document.querySelector(".change-inf__textfield"),l=document.querySelector(".change-inf__button"),u=document.querySelector(".change-inf__popup");async function d(){if(""!==s.value){const e=await(0,i.A)(s.value);(0,c.a)(e),0==e?alert("Вы ошиблись в названии города, поробуйте заново"):(u.classList.remove("change-inf__popup--visible"),s.value="")}}a.addEventListener("click",(()=>{u.classList.contains("change-inf__popup--visible")||u.classList.add("change-inf__popup--visible")})),window.addEventListener("click",(e=>{e.target.closest(".change-inf__popup")||e.target.classList.contains("title--change")||e.target.classList.contains("city__btn-temp")||!u.classList.contains("change-inf__popup--visible")||u.classList.remove("change-inf__popup--visible")})),window.addEventListener("keydown",(e=>{u.classList.contains("change-inf__popup--visible")&&("Escape"===e.key&&u.classList.remove("change-inf__popup--visible"),"Enter"===e.key&&d())})),l.addEventListener("click",d),document.querySelector(".change-inf__location").addEventListener("click",o.Q)}},467:(e,t,n)=>{function i(){!function(e){let t=new Image;t.onload=t.onerror=function(){1==(2==t.height)?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}()}n.d(t,{A:()=>i})},647:(e,t,n)=>{n(87)}},t={};function n(i){var c=t[i];if(void 0!==c)return c.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n(647),n(87),n(277),n(365),n(383),n(961),n(119),n(73),n(462),n(467)})();